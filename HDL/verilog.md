
22/08/06

## 绪论
- 建模、结构平衡、功能验证、故障模拟、逻辑综合  
- 算法级、门级、开关级等逻辑抽象  
- EDA  
- verilog HDL（1364）、VHDL（1076）  
- 高层次、基于语言的抽象电路  
- 功能和定时特性  
- 状态机、状态转移图、算法状态图ASM  
- 有限状态机  
- 数据通道  
- RISC状态机、汇编器  
- RTL，寄存器传输级  
- 卡诺图  
- 面积限制、定时约束  
- 图形发生器  
- UUT  
- 激励发生器  
- 最优布尔描述  
- 目标FPGA的标准单元网表或数据库  
- 软竞争条件  
- 金属线导致的电容性延时，金属材料特性和制造掩膜的集和形状  
- 时钟树  
- 扫描路径  
- 高阻态Hi-Z  
- 定时约束，时间特性、定时特性


## 第一章 数字设计方法概论  
- 电路原理的人工设计方法  
- 门  
- 网表netlist  
- 功能模型、行为模型 
  - 设计规范，功能特性;功能、定时、硅面积、功耗、可测性、故障覆盖率；状态转移图、时序图、ASM（描述时序机）  
  - 设计划分，自顶向下、分层设计  
  - 设计输入，基于语言的描述文件，综合工具转换引擎技术；行为建模，  
  - 仿真与功能验证，待测试单元UUT，  
  - 设计整合和验证  
  - 预综合结束  
  - 门级综合和工艺映射，综合工具产生布尔描述和设计描述  
  - 后综合设计确认，与行为模型，响应比较器  
  - 后综合定时验证，定时边界，信号通道上的速度。  
  - 测试生成与故障模拟，验证行为模型的模板  
  - 校验物理和电器设计规则，扇出约束，电串扰，电源栅压降，噪声电平，功率耗散。  
  - 提取寄生参量，寄生电容  
  - 设计结束，生成掩膜集，（由几何数据构词，GDS——II）  
### 1.2 IC工艺选择  
- PLD、FPGA、标准单元、全定制IC  

## 第二章 组合逻辑设计回顾  
- 输出=瞬时输入变量的布尔函数形式  
- 时序逻辑电路：输出与时刻t之前的历史输入有关  
- 正逻辑：高5V，1；低0V，0；
- 负逻辑：低电平1，高电平0；  
- 
### ASIC库单元  
- 逻辑门，晶体管电路实现  
- CMOS，互补金属氧化物  
- 库： 逻辑门、触发器锁存器、多路服用器、加法器  
- 布尔代数  
- 多纬Bn，中的一个点称为顶点  
- 帝摩根定律，积之和改为和之积  
- venn图  
### 2.3 组合逻辑的表示
- 机构化原理图   
- 真值表  
- 布尔方程式  
- 二进制判定图BDD  
- SOP积之和表示-sum-of-product  
- 蕴涵项implicant  
- 最小项  
- 规范的SOP  
- 标准SOP，SSOP；  
### 2.4 布尔表达式的化简  
- 卡诺图，手工作图法  
- 奎恩-麦克洛斯基  
- 布尔化简法，手工  
- 将布尔化简的定理潜入到mis-II现代综合工具中  
- 逻辑相临性  
- 增加冗余项  
- 任意项:输入不可能出现或输出不起作用  
- 
### 2.5 假信号与冒险  
- 
- ghich：组合逻辑电路的输出即时没有输入也会变化。  
- 冒险：施加合理输入的假信号脉冲电路存在hazard。静态冒险、动态冒险  
- 静态1冒险、静态0冒险  
- 静态冒险：不同汇聚扇出路径上的不同传播时延造成  
- 时钟周期可以扩展，同步时序  
- 消除冒险：覆盖冒险，输出表达式引入冗余乘积。  
- 乘之和覆盖相邻乘积项中每一对相邻1格。  
- 多级：乘积因式展开成2级  
- 变量与补变量的乘积项，静态0冒险  
- 变量与补变量之和因式，静态1冒险  
- 瞬时输出函数Ftof  
- 动态冒险：一个输入跃变造成了输出达到期望值前发生了2次或以上的跃变。  
- 多条重新汇聚路径  
-   
### 2.6 逻辑设计模块  
- CMOS，与非和或非高效  
- 多路复用器multiplexer  
- 多路解复用器  
- 输入位的真值表完全译码，不太高效  
- 编码器，减少数据通道数目作用    
- 优先编码器  
- 译码器  
- 
## 第三章 时序逻辑设计基础  

- "时序机"：计算机及具有存储器，按照存储信息执行一系列操作的系统  
- 同步确定时序机
- 存储单元  
- 锁存器latch，电平触发，
  - S-R锁存器，set-reset  
  - 透明锁存器、D锁存器、数据锁存器  
- 触发器Flip-Flop，边沿触发  
  - D触发器Qnext=D，可以由2级锁存器实现，CMOS中由传输门实现  
  - 主从触发器：主级充电，从级靠反馈回路保持，触发边沿有效时，主级输出靠反馈保持，在从周期期间给从级输出端充电。  
  - J-K触发器：特征方程：Qnext=JQ'+J'Q  
  - T触发器，反转T，Qnext = Q异或T
- 存储器可以或可以不受时钟控制  

### 3.3 总线与三态器件  
- 总线：信息通道，同步或异步，软件（握手协议）或硬件  
- 三态器件：电路与总线隔离  
- 
### 3.4 时序机设计  
- ***状态***  
- 计数器  
- PS，present state
- NS，next state  
- 存储器，保存当前状态值  
- 异步状态转换  
- 同步状态转换：
  - 1.触发时刻，满足定时约束建立和保持的条件  
  - 2.存储单元时钟信号的物理分布造成的时钟歪斜  
- 时钟周期必须足够长，所有瞬变过程能在下一个有效沿之前完成  
- 保持稳定  
- 电路最长路径的时间的上限  
- FSM，finite state machine状态数目是有限的，位数状态n    
- 米利机、摩尔机  

### 3.5 状态转换图  
- 时序图、状态表、状态图、ASM图、状态转移图  
- STG，state transition graph，有向图，  
### 3.6 BCD码到余3码  
- 构建状态机的STG  
- 消去等价状态  
- 选取状态码binary code  
- 编写状态表  
- 推出描述保持状态的D触发器的布尔方程  
- 利用卡诺图优化布尔方程  
### 3.7 数据传输的串行线码转换器  
- line code  
  - 数据边界的时钟  
  - 码字边界的同步信号  
  - 数据流  
- 串行编码方法  
  - NRZ  
  - NRZI  
  - RZ  
  - 曼彻斯特码  
### 状态化简与等价状态  
- 时序机的2个状态对所有可能的输入序列都具有相同的输出序列  
- 可能合并状态对的三角形队列，
- 等价递归定义  

## 第四章 verilog逻辑设计介绍  
- 组合逻辑的结构化模型  

~~~
module Add_half (sum,c_out,a,b);
  input a,b;
  output c_out,sum;
  xor (sum,a,b);
  and (c_out,a,b);
endmodule
~~~  
- 原语，primitive，26个预定义功能  
- n输入原语  
- 端口，端子  
- 例化  
- 工作域，定义域  
- 连线  
- 模块，设计的功能和环境接口
  - 模块的功能  
  - 进、出口环境的端口  
  - 设计的定时和其他属性  
  - 模块对列表中IO端口的相对次序没限制
  - 声明、、描述语句  
- 模块端口，input、output、inout  
- 输出端子在最左边  
- verilog一些语言规则  
  - 大小写敏感  
  - 空格无效  
  - 标志符、名称：大小写字母、数字、下划线、$组成，第一个不是数字或$  
  - 变量名长度最大1024字符  
  - 预定义的系统任务由$开始  
  - 描述文本每一行必须以；结束，endmodule除外  
  - 注释，单行//,多行 /*  */  
  - 时标指令 'timescale 1ns/1ps
  - 
-  模块可以嵌套在其他模块内，不能循环嵌套  
-  零时延模型、单位传播时延  
- verilog矢量  sum[3:0] ，最左端最高位，  
- 结构化连接  
  - 线  
  - 线网net，建立连接  
  - 没有类型定义的任何标志符都会默认为wire类型  
  - 连接例化模块端口的方式必须与模块定义的方式一致，需要连接的信号名称可以不一样  
  - 实际名称与正式名称之间的联系.formal_name(actual_name),形式名称，例化模块声明中用；实习名称，例化过程中使用  
  
### 4.2 逻辑系统，设计验证与测试方法  
- 逻辑仿真，加激励波形，观察仿真特性  
- 形式验证  
- 四值逻辑0、1、x（模糊状态，2个相反的驱动）、z（三态，连接线不与驱动器连接）和信号解析  
- 要确保总线不会出现多个驱动
- 测试方法  
  - 激励发生器  
  - 响应显示器  
  - 被测试单元UUT  
- 仿真器  
  - 检查源代码  
  - 报告语法错误  
  - 应用测试平台的输入信号对电路行为进行仿真  
 - initial，测试单元的波形定义  
 - begin...end  
 - 信号发生器  
 - 行为，仿真过程中运行一组给变量赋值的语句  
 - 时基tsim=0  
 - 过程语句  
 - 激励模板  
 - 时间控制  
 - #10，执行语句的延时时间  
 - 延迟操作控制符#，延迟值  
 - 终止仿真的秒表$finish系统任务  
 - 仿真器给所有网线和reg变量赋值x  
 - 测试平台模板  
- 有符号数，格式指示符，不是大小写敏感  
 
 ### 4.3 传播时延  
 - 基本门，零时延，零时延模型  
 - 单位延时，显示信号动作的时间顺序  
 - 库单元，精确的定时信息。  
 - 定时约束，时间特性、定时特性  
 - norf201库单元，包含基于物理标准单元特性描述的传播延时  
 - 惯性延时，信号变化的物理行为是有惯性的。  
 - 电荷的积累和耗散导致的电压电平的变化  
 - 要求输入脉冲在一个持续时间内不变  
 - 惯性inertial延时值：输入脉冲的最小宽度，门的传播延时  
 - 导线延时可以用线声明语句定义：wire #2 A_long_wire  
 - 
 ### 4.4 组合与时序逻辑的verilog真值表模型  
 - 建立用户定义原语UDP，user Defined Primitive，仿真速度快，需要的存储设备少的特点  
 - UDP,仅有一个标量（一位）输出端。  
 - 行不匹配，则输出x  
 - 输入z被仿真器处理成x  
 - 减少基本门传输x的情况  
 - 符号"?"代表0，1，x  
 - UDP输出必须定义为reg类型。输出是真值表抽象产生的，在仿真期间保存在存储器中。  
 - 时序行为真值表===输入数值列：器件当前状态的列：由当前输入产生的下一个状态的列===  
 - 圆括号，把发生跳变时会影响到输出的信号所定义的逻辑值括起来。。（同步输入信号）（01）clcock由低到高转换）
~~~
primitive AOI_UDP(y,x):
  output y;
  input x;
  table
  0 0 0 0 :1;
  endtable
endprimitive

//时序行为真值表
输入数值列：器件当前状态的列：由当前输入产生的下一个状态的列
~~~

2022年8月11日15:02:53

### 5.1 行为建模  

- 端口通信的功能单元   
- 设计方法：抽象描述，然后综合成门，干什么的，而不是怎样干  
- 程序的信息：存错器中的变量  
- 数据类型：wirenet、reg（1位），integer（至少32位，机器字长）  
- 关键词***assign***，定义了连续赋值的意义，可省略  
- 传播延时与连续赋值  
	- 连续赋值语句->布尔方程  
	- 电路原理图->结构模型  
	- 真值表->UDP  
- 锁存器与电平敏感电路（连续赋值语句）  
	- 反馈用于一条带条件操作符的连续赋值语句时，锁存功能  
- 嵌套的条件操作符  
- 触发器和锁存器的周期性行为模型，模拟电平敏感和边沿敏感行为  
- 关键词***always***  
- 当周期性行为的所有语句执行结束时，计算动作流程返回到always，并再次按照事件控制表达式开始执行  
> always @ (posedge ckl)  

-  ***=*** 过程赋值运算符（过程语句中），必须是已定义的reg类型，存储信息  
-  ***@***  事件控制操作符  
- 周期行为和边沿检测  
-  
### 5.8 行为建模方式的比较  
- ***parameter*** 定义数据通道字长大小的参数  
> parameter word_size = 32;  
> input [word_size-1:0] A,B;  

- 数据流/寄存器传输级RTL模型  
- 描述了寄存器在***同步机***中的动作  
- ***阻塞赋值语句***，过程赋值语句***=***,顺序执行  
- ***非阻塞赋值语句***，非阻塞赋值语句***<=***，高效并发执行，语句排列次序没有影响  
- 边沿->非阻塞；组合逻辑->阻塞。  
- 基于算法的模型  
- 比RTL更抽象，映射到TRL模型  
- 区别：按次序，没有显式定义的寄存器  
- 端口名称，按照下列次序命名：数据通道的双向信号、双向控制信号、数据通道输出、控制输出、数据通道输入、控制输入、同步信号  
- 基本门和连续赋值是瞬时完成的  
- ***wait***结构  
- ***casex***包含优先级，忽略了x和z，认为部重要  
- 8'b1xxxxxxx  
- 

2022年8月12日09:23:10  

- 线性反馈移位寄存器LFSR的数据流模型，用于ＣＲＣ校验  
- 用重复算法模拟数字机FOR　
~~~
for(i;i<10;i++)
statement_for_exec
~~~
- ***repeat***  x或z，视为0
- ***while***  
--***forever***  
- ***disable***，相当于break  
~~~
while(expr) statement;
~~~
- 智能复用和参数化模型，可以指定总线宽度、字长、for循环参数等  
- 时钟发生器，forever  
- ***initial***   
|   | always | forever |
| - | - | - |
| 是否并发 | 并发  | 行为内部的计算动作流|
| 嵌套  | 不  | 可以嵌套  |
| 执行  | 仿真一开始激活并执行  | 动作流中执行  |
- 多循环操作状态机  
- 例5.35不懂  
- 包含函数和任务的设计文件  
	- 任务：创建过程语句的层次化结构，在模块中声明，必须命名，可以包含@，不能包含#  
	- 函数：代替表达式，在父模块中定义，只可以实现组合逻辑行为，至少有1个输入，执行不占时间  
	- 标识符  
	- ***real***  
	- ***time***  
	- ***realtime***  
	- ***event*** 定义了一个抽象事件  
- 行为建模的算法状态机图  
- ASM图，时序状态机  
	- 状态框、判决框、条件框  
	- ASM块 
	- 状态机Mealy和Moore可以用ASM表示  
- 算法状态机和数据通道图ASMD  
- RTN，寄存器传送标记  
- 计数器，例5.40不懂，是否是case的写法？？？  
- ***串行操作符***  
> count <= {count[6:0],count[7]};  

- 移位寄存器  
- 4位通用移位寄存器  
- 例子5.44？？  
- 桶形移位器  
- 寄存器组和寄存器（存储器）阵列  
- 写入和无损读，D触发器实现  
- Reg_File存储器，32个字的存储器，每个字32位  
> Reg_file[Write_Addr]  

- 用于异步信号的去抖动开关，亚稳定性和同步装置  
- 触发器和锁存器当存储原件，器件有亚稳态  
- RC低通  
- 锁存器去抖  
- 告诉数字电路依靠同步装置来创造一个从亚稳态条件到正常的时间缓冲器  
- 多级移位寄存器，  n+1，同步装置链路的级数  
- 异步输入脉冲宽度><始终周期  

## 第六章 组合逻辑和时序逻辑的综合  
---
- 设计引擎：简化布尔函数，并将结果映射为满足设计目标的硬件设计的任务  
- 管理和控制能描述大型复杂电路的数据库  
- 抽象：架构、逻辑、物理  
- 描述方法：行为、结构、物理  
- 
- 逻辑综合  
- RTL综合，语言操作符  
- 高级综合、行为综合、结构综合  
- 明确寄存器和数据通道的结构  
- 资源分配和资源规划  
- 数据通道单元、控制单元、存储器  
- 隐形的时钟周期  
- 数据速率、输入/输出通道、时钟周期、流水线、数据通道宽度、延迟、吞吐率、速度、面积、功率  




  
