# Real-Time Rendering 4th  
2023/02/28  
---

### 3. 图形渲染管线  
- 包含：应用阶段、几何处理、栅格、像素处理  
- 
1. 定点着色 
	a.计算顶点坐标、法线坐标，颜色，一套坐标系，相机空间,窗口坐标 ，屏幕坐标2d 
    b.外观建模，材料，光源照射物体上的反射（阴影），  
    c.投影：正投，透视  
    d.镶嵌、几何图形着色器（例子生成），流输出  	e.剪切Clipping  
    f.屏幕映射 Screen Mapping   
2. 栅格化  
	- 三角形设置  
	- 三角形遍历  
	- 
3. xx  
-end

---

GPU 渲染管线和硬件架构浅谈  
- 所谓渲染管线，就是 CPU 传送给 GPU 一堆数据（顶点、纹理等），经过一系列处理，最后渲染得出来一副二维图像。有以下几个阶段。  
	- IMR  
	- TBR  
	  - 屏幕分成一个一个Tile（32x32），GPU只绘制一个，然后写到FrameBuffer。  
	  1. 处理所有顶点，生成一个tile list的中间数据，保存每个图元属于哪个tile  
	  2. 针对每个tile，执行像素处理。
	- TBDR  
- SRAM，速度快，片内存储L1，L2 catch，4M,12M，26-37M
> L1/L2 缓存是片上缓存，速度很快，但是通常比较小。比如 L1 cache 通常在 32KB~256KB 这个级别。而 L3 cache 可以达到 8MB~32MB 这个级别。像苹果的 M1 芯片（CPU 和 GPU 等单元在一个硬件上，SoC），L3 缓存是给所有硬件单元使用的，所以也被称为 System Level Cache。
> L1 缓存分为指令缓存（I-Cache）和数据缓存（D-Cache），CPU 针对指令和数据有不同的缓存策略。
L1 缓存不可能设计的很大。因为增大 L1 缓存虽然会减少 L1 cache missing，但是会增加访问的时钟周期，也就是说降低了 L1 cache 的性能。
CPU 的 L1/L2 缓存需要处理缓存一致性问题。即不同核心之间的 L1 缓存之间的数据应该是一致的。当一个核心的 L1 中的数据发生变化，其他核心的 L1 中的相应数据需要标记无效。而 GPU 的缓存不需要处理这个问题。
> CPU 查找数据的时候按照 L1-->L2-->L3-->DRAM 的顺序进行。当数据不在缓存中时，需要从主存中加载，就会有很大的延迟。
- DRAM，DDR  
- GDDR，显存ddr    
- LPDDR  
- UFS  
- 
-  ext  
